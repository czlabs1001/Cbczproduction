(()=>{var t,e,r,n,a,o,i,u,c,l,f,s,p={506:t=>{t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},575:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},913:t=>{function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}},713:t=>{t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},525:(t,e,r)=>{var n=r(331);function a(e,r,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=a=Reflect.get:t.exports=a=function(t,e,r){var a=n(t,e);if(a){var o=Object.getOwnPropertyDescriptor(a,e);return o.get?o.get.call(r):o.value}},a(e,r,o||e)}t.exports=a},754:t=>{function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(r)}t.exports=e},205:(t,e,r)=>{var n=r(489);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},318:t=>{t.exports=function(t){return t&&t.__esModule?t:{default:t}}},585:(t,e,r)=>{var n=r(8),a=r(506);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}},489:t=>{function e(r,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(r,n)}t.exports=e},331:(t,e,r)=>{var n=r(754);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}},8:t=>{function e(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(r)}t.exports=e},428:(t,e,r)=>{var n=r(318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(r(575)),o=n(r(913)),i=n(r(205)),u=n(r(585)),c=n(r(754)),l=n(r(567));var f=function(t){(0,i.default)(f,t);var e,r,n=(e=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.default)(e);if(r){var a=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,u.default)(this,t)});function f(){var t;(0,a.default)(this,f);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=n.call.apply(n,[this].concat(r))).initialize(),t}return(0,o.default)(f,[{key:"initialize",value:function(){(0,l.default)(document.body).on("updated_wc_div",this.updatedHtml.bind(this)),(0,l.default)(document.body).on("updated_cart_totals",this.updatedHtml.bind(this)),this.createMessage()}},{key:"updatedHtml",value:function(){this.gateway.has_gateway_data()&&this.createMessage()}},{key:"getElementContainer",value:function(){return(0,l.default)("#wc-stripe-affirm-cart-container").length||(0,l.default)(".cart_totals table.shop_table > tbody").append('<tr id="wc-stripe-affirm-cart-container"><td colspan="2"><div id="wc-stripe-affirm-cart-msg"></div></td></tr>'),document.getElementById("wc-stripe-affirm-cart-msg")}}]),f}(n(r(416)).default);e.default=f},934:(t,e,r)=>{var n=r(318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(r(575)),o=n(r(913)),i=n(r(525)),u=n(r(205)),c=n(r(585)),l=n(r(754)),f=n(r(567));var s=function(t){(0,u.default)(s,t);var e,r,n=(e=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,l.default)(e);if(r){var a=(0,l.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,c.default)(this,t)});function s(){var t;(0,a.default)(this,s);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=n.call.apply(n,[this].concat(r))).initialize(),t}return(0,o.default)(s,[{key:"initialize",value:function(){(0,f.default)(document.body).on("updated_checkout",this.updatedCheckout.bind(this)),this.gateway.has_gateway_data()&&this.createMessage()}},{key:"updatedCheckout",value:function(){this.createMessage()}},{key:"createMessage",value:function(){this.gateway.has_gateway_data()&&(0,i.default)((0,l.default)(s.prototype),"createMessage",this).call(this)}},{key:"getElementContainer",value:function(){return(0,f.default)("#wc-stripe-affirm-message-container").length||(0,f.default)('label[for="payment_method_stripe_affirm"]').append('<div id="wc-stripe-affirm-message-container"></div>'),document.getElementById("wc-stripe-affirm-message-container")}}]),s}(n(r(416)).default);e.default=s},388:(t,e,r)=>{var n=r(318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(r(575)),o=n(r(913)),i=n(r(205)),u=n(r(585)),c=n(r(754)),l=n(r(567));var f=function(t){(0,i.default)(f,t);var e,r,n=(e=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.default)(e);if(r){var a=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,u.default)(this,t)});function f(){var t;(0,a.default)(this,f);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=n.call.apply(n,[this].concat(r))).initialize(),t}return(0,o.default)(f,[{key:"initialize",value:function(){(0,l.default)(document.body).on("change",'[name="quantity"]',this.createMessage.bind(this,!0)),this.createMessage()}},{key:"getElementContainer",value:function(){return(0,l.default)("#wc-stripe-affirm-product-msg").length||((0,l.default)(".summary .price").length?(0,l.default)(".summary .price").append('<div id="wc-stripe-affirm-product-msg"></div>'):(0,l.default)(".price").length&&(0,l.default)((0,l.default)(".price")[0]).append('<div id="wc-stripe-affirm-product-msg"></div>')),document.getElementById("wc-stripe-affirm-product-msg")}},{key:"getTotalPriceCents",value:function(){var t,e;return this.gateway.has_gateway_data()?(null===(t=this.gateway.get_gateway_data())||void 0===t||null===(e=t.product)||void 0===e?void 0:e.price_cents)*this.getQuantity():0}},{key:"getQuantity",value:function(){var t=(0,l.default)('[name="quantity"]').val();return isNaN(t)&&(t=0),parseInt(t)}}]),f}(n(r(416)).default);e.default=f},416:(t,e,r)=>{var n=r(318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(r(713)),o=n(r(575)),i=n(r(913));function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var c=function(){function t(e){(0,o.default)(this,t),this.elementType="affirmMessage",this.gateway=e,this.msgElement=null}return(0,i.default)(t,[{key:"isSupported",value:function(){var t,e,r,n,a,o=null===(t=this.gateway)||void 0===t||null===(e=t.get_gateway_data())||void 0===e?void 0:e.currency;return null===(r=this.gateway)||void 0===r||null===(n=r.params)||void 0===n||null===(a=n.supportedCurrencies)||void 0===a?void 0:a.includes(o)}},{key:"createMessage",value:function(){if(this.isSupported()&&this.createMessageElement()){var t=this.getElementContainer();t&&this.mount(t)}}},{key:"createMessageElement",value:function(){var t,e;return this.msgElement?this.msgElement.update(this.getMessageOptions()):this.msgElement=null===(t=this.gateway)||void 0===t||null===(e=t.elements)||void 0===e?void 0:e.create(this.elementType,this.getMessageOptions()),this.msgElement}},{key:"getMessageOptions",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){(0,a.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({amount:this.getTotalPriceCents(),currency:this.gateway.get_currency()},this.gateway.params.messageOptions)}},{key:"mount",value:function(t){try{this.msgElement.mount(t)}catch(t){console.log(t)}}},{key:"getElementContainer",value:function(){}},{key:"getTotalPriceCents",value:function(){var t;return null===(t=this.gateway.get_gateway_data())||void 0===t?void 0:t.total_cents}}]),t}();e.default=c},567:t=>{"use strict";t.exports=window.jQuery},707:t=>{"use strict";t.exports=window.wc_stripe}},d={};function y(t){var e=d[t];if(void 0!==e)return e.exports;var r=d[t]={exports:{}};return p[t](r,r.exports,y),r.exports}t=y(318),e=t(y(575)),r=t(y(205)),n=t(y(585)),a=t(y(754)),o=y(707),i=t(y(388)),u=t(y(428)),c=t(y(934)),s=function(t){(0,r.default)(c,t);var o,i,u=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,a.default)(o);if(i){var r=(0,a.default)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,n.default)(this,t)});function c(t){return(0,e.default)(this,c),u.call(this,t)}return c}(o.BaseGateway),"undefined"!=typeof wc_stripe_affirm_cart_params&&new u.default(new s(wc_stripe_affirm_cart_params)),"undefined"!=typeof wc_stripe_affirm_product_params&&new i.default(new s(wc_stripe_affirm_product_params)),"undefined"!=typeof wc_stripe_local_payment_params&&null!==(l=wc_stripe_local_payment_params)&&void 0!==l&&null!==(f=l.gateways)&&void 0!==f&&f.stripe_affirm&&new c.default(new s(wc_stripe_local_payment_params.gateways.stripe_affirm))})();
//# sourceMappingURL=affirm-messaging.js.map